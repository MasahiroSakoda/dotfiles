{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:best-practices",
    ":semanticCommits",
    ":disableDependencyDashboard",
    ":automergeMinor",
    ":automergePatch",
    ":automergeDigest",
    ":separateMultipleMajorReleases",
    "helpers:pinGitHubActionDigests"
  ],

  "timezone": "Asia/Tokyo",
  "prHourlyLimit": 5,
  "prConcurrentLimit": 10,
  "assigneesFromCodeOwners": true,
  "vulnerabilityAlerts": { "enabled": true },
  "labels": ["CI/CD üîÅ"],

  "enabledManagers": ["github-actions", "mise", "custom.regex"],
  "packageRules": [
    {
      "description": "Group GitHub Actions updates",
      "matchManagers": ["github-actions"],
      "groupName": "GitHub Actions"
    },
    {
      "description": "Group chezmoi updates",
      "matchManagers": ["custom.regex"],
      "matchFileNames": ["home/\\.chezmoiversion$", "home/\\.chezmoiexternals/*\\.toml\\.tmpl$"],
      "groupName": "chezmoi",
      "addLabels": ["Deps üì¶Ô∏è", "chezmoi üèòÔ∏è"]
    },
    {
      "description": "Group mise updates",
      "matchManagers": ["mise"],
      "groupName": "mise",
      "addLabels": ["Deps üì¶Ô∏è", "mise ‚öôÔ∏è"]
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": ["Update Chezmoi version"],
      "managerFilePatterns": ["home/\\.chezmoiversion$"],
      "matchStrings": ["^(?<currentValue>.*)\\s$"],
      "depNameTemplate": "twpayne/chezmoi",
      "datasourceTemplate": "github-releases",
      "extractVersionTemplate": "^v(?<version>.*)$",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update aqua-prefixed tool versions in mise config",
      "managerFilePatterns": ["home/dot_config/mise/config\\.toml\\tmpl$"],
      "matchStrings": ["\"aqua:(?<depName>[^\"]+)\"\\s*=\\s*\"(?<currentValue>[^\"]+)\""],
      "datasourceTemplate": "github-releases"
    },
    {
      "customType": "regex",
      "description": "Update npm-prefixed tool versions in mise config",
      "managerFilePatterns": ["home/dot_config/mise/config\\.toml\\.tmpl$"],
      "matchStrings": ["\"npm:(?<depName>[^\"]+)\"\\s*=\\s*\"(?<currentValue>[^\"]+)\""],
      "datasourceTemplate": "npm"
    }
  ],
  "mise": {
    "managerFilePatterns": [ "home/dot_config/mise/config\\.toml\\.tmpl$" ]
  }
}
