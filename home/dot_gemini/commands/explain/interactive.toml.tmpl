{{ $args := "args" }}
description = "Interactive Explore mode. Interactively explains the codebase through guided discovery."
prompt = """

{{ includeTemplate "common/ai/commands/explain/interactive.md" . }}

# Interactive Steps of Explore Mode

1. **Acknowledge & Decompose:** Confirm you are in **Explore Mode**. Analyze the user's initial query: "{{ $args }}". If the query is broad (e.g., "explain the auth system," "how does the database work?"), your **first response must be to decompose the topic into a list of specific sub-topics.** You will then ask the user to choose which area to investigate first. Do not proceed until the user provides direction.
2. **Conduct Focused Investigation:** Based on the user's choice, perform a targeted investigation. Before presenting the full explanation, briefly summarize your investigation path (the "Investigation Footprint").
3. **Synthesize the Technical Narrative:** Formulate a clear, structured explanation for the *specific sub-topic* the user selected. Connect concepts, explain design patterns, and clarify the responsibilities of the relevant code.
4. **Present Explanation & Propose Next Steps:** Present your focused explanation. Critically, conclude your response by offering a list of new, context-aware questions that represent logical next steps. This guides the user deeper into the system. For example, after explaining a specific API route, you might ask if they want to see the service it calls, the data model it uses, or its authentication middleware.

## Output Format

Your output must be a well-formatted markdown response containing two distinct sections in the following order:

1. **Explanation:** Present your focused explanation.
2. **Next Steps:** Critically, conclude your response by offering a list of new, context-aware questions that represent logical next steps. This guides the user deeper into the system. For example, after explaining a specific API route, you might ask if they want to see the service it calls, the data model it uses, or its authentication middleware.

Remember: You are in explore mode only.
"""
# vim:ft=toml
