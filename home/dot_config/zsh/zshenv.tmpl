# -*-mode:zsh-*- vim:ft=zsh

# ███████╗███████╗██╗  ██╗███████╗███╗   ██╗██╗   ██╗
# ╚══███╔╝██╔════╝██║  ██║██╔════╝████╗  ██║██║   ██║
  # ███╔╝ ███████╗███████║█████╗  ██╔██╗ ██║██║   ██║
 # ███╔╝  ╚════██║██╔══██║██╔══╝  ██║╚██╗██║╚██╗ ██╔╝
# ███████╗███████║██║  ██║███████╗██║ ╚████║ ╚████╔╝
# ╚══════╝╚══════╝╚═╝  ╚═╝╚══════╝╚═╝  ╚═══╝  ╚═══╝

# XDG Based Directory
export XDG_CONFIG_HOME=${XDG_CONFIG_HOME:-$HOME/.config}
export XDG_CACHE_HOME=${XDG_CACHE_HOME:-$HOME/.cache}
export XDG_DATA_HOME=${XDG_DATA_HOME:-$HOME/.local/share}
export XDG_STATE_HOME=${XDG_STATE_HOME:-$HOME/.local/state}
[ -d $HOME/.xdg ] && export XDG_RUNTIME_DIR=${XDG_RUNTIME_DIR:-$HOME/.xdg}
export ZDOTDIR="${XDG_CONFIG_HOME:-${HOME}/.config}/zsh"

if [[ "$OSTYPE" == darwin* ]]; then
  export XDG_DESKTOP_DIR=${XDG_DESKTOP_DIR:-$HOME/Desktop}
  export XDG_DOCUMENTS_DIR=${XDG_DOCUMENTS_DIR:-$HOME/Documents}
  export XDG_DOWNLOAD_DIR=${XDG_DOWNLOAD_DIR:-$HOME/Downloads}
  export XDG_MUSIC_DIR=${XDG_MUSIC_DIR:-$HOME/Music}
  export XDG_PICTURES_DIR=${XDG_PICTURES_DIR:-$HOME/Pictures}
  export XDG_VIDEOS_DIR=${XDG_VIDEOS_DIR:-$HOME/Videos}
  export XDG_PROJECTS_DIR=${XDG_PROJECTS_DIR:-$HOME/Projects}
fi

# mise
export MISE_DATA_DIR="$XDG_DATA_HOME/mise"
export MISE_CONFIG_FILE="$XDG_CONFIG_HOME/mise/config.toml"
export MISE_TRUSTED_CONFIG_PATHS="$MISE_CONFIG_FILE"
export MISE_LOG_LEVEL="info"
export MISE_FETCH_REMOTE_VERSIONS_TIMEOUT="1800 s"

## Rust
export RUST_BACKTRACE="full"
export RUSTUP_HOME="$XDG_DATA_HOME/rustup"
export CARGO_HOME="$XDG_DATA_HOME/cargo"
export MISE_RUSTUP_HOME=$RUSTUP_HOME
export MISE_CARGO_HOME=$CARGO_HOME
export PATH="$CARGO_HOME/bin:$PATH"


## Ruby
export BUNDLE_USER_CONFIG="$XDG_CONFIG_HOME/bundle"
export BUNDLE_USER_CACHE="$XDG_CACHE_HOME/bundle"
export BUNDLE_USER_PLUGIN="$XDG_DATA_HOME/bundle"

# tmux
export TMUX_HOME="$XDG_CONFIG_HOME/tmux"
export TMUX_PLUGIN_MANAGER_PATH="$XDG_DATA_HOME/tmux/plugins"

# zellij
export ZELLIJ_CONFIG_DIR="$XDG_CONFIG_HOME/zellij"
export ZELLIJ_CONFIG_FILE="$ZELLIJ_CONFIG_DIR/config.kdl"
export ZELLIJ_LAYOUTS_DIR="$ZELLIJ_CONFIG_DIR/layouts"

# Sheldon
export SHELDON_CONFIG_DIR="${XDG_CONFIG_HOME}/sheldon"
export SHELDON_CONFIG_FILE="${SHELDON_CONFIG_DIR}/plugins.zsh.toml"

# Zoxide
export _ZO_DATA_DIR="$XDG_STATE_HOME/zoxide"
{{- if eq .chezmoi.os "darwin" }}
export _ZO_EXCLUDE_DIRS="**/.git/**:**/node_modules/**:**/tmp/**:**/dist/**:**/build/**:$XDG_CACHE_HOME/*:$HOME/Library/**:$HOME/Library/Caches/**"
{{- else if .chezmoi.os "linux" }}
export _ZO_EXCLUDE_DIRS="**/.git/**:**/node_modules/**:**/tmp/**:**/dist/**:**/build/**:$XDG_CACHE_HOME/*"
{{- end }}
export _ZO_FZF_OPTS="--preview 'eza --tree --long --header --color=always --group-directories-first --hyperlink {} || echo \"No Preview\"' --exit-0"

# VSCode
export VSCODE_PORTABLE="$XDG_DATA_HOME/vscode"
export VSCODE_EXTENSIONS="$VSCODE_PORTABLE/extentions"

# Container
export LIMA_HOME="$XDG_DATA_HOME/lima"
export COLIMA_HOME="$XDG_CONFIG_HOME/colima"
export DOCKER_CONFIG="$HOME/.docker"
export DOCKER_HOST="unix://$COLIMA_HOME/default/docker.sock"

# AI Agent
export OPENCODE_CONFIG="$XDG_CONFIG_HOME/opencode/config.json"
export CLAUDE_CONFIG_DIR="$XDG_CONFIG_HOME/claude"
# export GEMINI_CONFIG_DIR="$XDG_CONFIG_HOME/gemini"
export CODEX_HOME="$XDG_CONFIG_HOME/codex"
export SERENA_HOME="$XDG_DATA_HOME/serena"

# API Keys
{{ if eq .chezmoi.os "darwin" }}
export GITHUB_ACCESS_TOKEN=$(security find-generic-password -s "MCP Server for GitHub" -w)
export OPENAI_API_KEY=$(security find-generic-password -s "OpenAI API Key" -w)
export GOGGLE_API_KEY=$(security find-generic-password -s "Google API Key" -w)
export GEMINI_API_KEY=$(security find-generic-password -s "Gemini API Key" -w)
export AZURE_OPENAI_API_KEY=$(security find-generic-password -s "Azure API Key" -w)
export GROQ_API_KEY=$(security find-generic-password -s "Groq API Key" -w)
export DEEPL_API_KEY=$(security find-generic-password -s "DeepL API Key" -w)
export CONTEXT7_API_KEY=$(security find-generic-password -s "Context7 API Key" -w)
{{ else if eq .chezmoi.os "linux" }}
export GITHUB_ACCESS_TOKEN=$(secret-tool lookup username $USER key_name "MCP Server for GitHub" -w)
export OPENAI_API_KEY=$(secret-tool lookup username $USER key_name "OpenAI API Key" -w)
export GOGGLE_API_KEY=$(secret-tool lookup username $USER key_name "Google API Key" -w)
export GEMINI_API_KEY=$(secret-tool lookup username $USER key_name "Gemini API Key" -w)
export AZURE_OPENAI_API_KEY=$(secret-tool lookup username $USER key_name "Azure API Key" -w)
export GROQ_API_KEY=$(secret-tool lookup username $USER key_name "Groq API Key" -w)
export DEEPL_API_KEY=$(secret-tool lookup username $USER key_name "DeepL API Key" -w)
export CONTEXT7_API_KEY=$(secret-tool lookup username $USER key_name "Context7 API Key" -w)
{{ end }}
