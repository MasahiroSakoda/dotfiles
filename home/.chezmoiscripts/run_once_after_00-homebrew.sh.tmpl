#!/usr/bin/env bash
# -*-mode:sh-*- vim:ft=sh

set -eo pipefail

{{ template "common/script_eval_brew" . }}
{{ template "common/script_sudo" . }}

# Install Homebrew
if ! command -v brew > /dev/null 2>&1 && [ -f "$HOME/.config/homebrew/Brewfile" ]; then
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

# Install Homebrew packages
brew bundle -v --file="$HOME/.Brewfile"

{{ if not .headless }}
brew bundle -v --file="$HOME/.Caskfile"
brew bundle -v --file="$HOME/.Masfile"
{{ end }}

brew list
